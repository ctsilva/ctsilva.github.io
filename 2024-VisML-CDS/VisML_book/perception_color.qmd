## Visualization and Perception

## Perception for Design

![](2024-VisML-CDS/slides/figs/colinwarebook.jpg)

## Brain 

"Visual thinking consists of a series of acts of attention, driving eye movements, and tuning our pattern finding circuits", Colin Aware

![](figs/brain.jpg)


::: footer
Image from Wikipedia: [link](https://en.wikipedia.org/wiki/Human_brain)
:::

## The Vision Brain 

"Visual thinking consists of a series of acts of attention, driving eye movements, and tuning our pattern finding circuits", Colin Aware

![](figs/visualbrain.jpg)


::: footer
Image from Wikipedia: [link](https://en.wikipedia.org/wiki/Human_brain)
:::

## The Act of Perception

* Botton-Up and Top-Down Processes

![](figs/actofperception.jpg)

::: footer
Material from Colin Ware's book
:::

## The Act of Perception

* Bottom-up: information is sucessively selected and filtered into patterns as it passes a sequence of stages. Ware outlines three stages: 1) optical nerve to V1 Cortex; 2) use texture and colors to aggregate *patterns*; 3) visual objects are recognized in the *visual working memory*.

![](figs/facevase-illusion.jpg)

::: footer
Image from the book: "Eye and Brain: The Psychology of Seeing", Gregory
:::

## The Act of Perception

* Top-Down: Every stage of bottom-up processing contains a corresponding top-down process. Ware describes the process as "attention". The dominant principle is that we only get the information that we need, when we need it.

![](figs/eyemovements.jpg)

::: footer
Material from Colin Ware's book
:::


## The Implications for Design

* "Just-in-time visual queries" (Ware)

* "One way to look at the brain operates is a set of nested loops. Outer loops deal with generality while inner loops process detail." (Ware)

![](figs/brainproblemsolvingloop.jpg)

::: footer
Material from Colin Ware's book
:::


## Low-Level Feature Analysis

* David Hubel and Torsten Wiesel won Nobel prize for this discovery.

![](figs/v1-cortical-layer.jpg)

::: footer
Material from Colin Ware's book
:::

## What and Where Pathways

* What: identification of objects in environment.
* Where: location of objects and eye movement.

![](figs/what-and-where-pathway.jpg)

::: footer
Material from Colin Ware's book
:::

## What Stands Out (Popout)

* Anne Triesman studied how to find patterns and shapes when surrounded by others.

::: columns
::: {.column width="50%"}
![](figs/popout.jpg)
:::

::: {.column width="50%"}
![](figs/popout7.jpg)
:::

:::

For some configurations the time *did not* depend on the number of distracters (pre-attentive).

::: footer
Material from Colin Ware's book
:::


## What Stands Out (Popout)

![](figs/preattentive-vs-not.jpg)

::: footer
Material from Colin Ware's book
:::



## The Gestalt Principles [link, see video](https://www.interaction-design.org/literature/topics/gestalt-principles)

* Visualization is a two-way street:
  - We (the vis designer) bring something to the table.
  - The human (end user) brings their prior experience.
* Design should take such prior experience into account!
* What is prior experience? Gestalt laws.

::: footer
Material from Matt Berger
:::

## Closure

* We can complete incomplete shapes

![](figs/closure.jpg)

* Implications: visualizations can be unintentionally misleading! Conversely: sometimes only necessary to show sparse set of marks to convey trend (dot plot)

::: footer
Material from Matt Berger
:::


## Similarity

* Elements with the same visual properties considered to be grouped

![](figs/similarity.jpg)

::: footer
Material from Matt Berger
:::

## Similarity

* Elements with the same visual properties considered to be grouped

![](figs/similarity-example.jpg)

::: footer
Material from Enrico Bertini
:::

## Proximity

* Elements that are of close spatial proximity are somehow grouped. 

![](figs/proximity.jpg)

::: footer
Material from Matt Berger
:::

## Proximity

* Elements that are of close spatial proximity are somehow grouped. 

![](figs/proximity-example.jpg)

::: footer
Material from Enrico Bertini
:::

## Enclosure

* Explicit visual encoding of enclosure also depicts grouping.

![](figs/enclosure.jpg)

::: footer
Material from Matt Berger
:::

## Enclosure

* Explicit visual encoding of enclosure also depicts grouping.

![](figs/bubblesets.jpg)

[Bubblesets video link](https://www.youtube.com/watch?v=P6CgBmIiXaE)

::: footer
Material from Enrico Bertini
:::

## Connection

* Objects connected together are perceived as a group.

![](figs/connection.jpg)

::: footer
Material from Enrico Bertini
:::


## Connection

* Objects connected together are perceived as a group.

![](figs/connection2.jpg)

::: footer
Material from Enrico Bertini
:::


## Connection

* Objects connected together are perceived as a group.

![](figs/connection3.jpg)

::: footer
Material from Enrico Bertini
:::

## Connection

* Objects connected together are perceived as a group.

![](figs/connection4.jpg)

::: footer
Material from Enrico Bertini
:::



## Just Noticeable Difference (JND)

* In psychophysics a just-noticeable difference or JND is the amount something must be changed in order for a difference to be noticeable, detectable at least half the time. 

* Stevens's power law: [link](https://en.wikipedia.org/wiki/Stevens%27s_power_law)

![](figs/psychophysical-law.jpg)

::: footer
Wikipedia: [link](https://en.wikipedia.org/wiki/Just-noticeable_difference)
:::

## Accuracy

* How accurately a channel can express quantitative information

## Graphical Perception

::: columns
::: {.column width="50%"}
![](figs/cleveland-book-cover.jpg)

:::

::: {.column width="50%"}
![](figs/cleveland-mcgill-paper.jpg)
:::

:::

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Graphical Perception Experiment

![](figs/cleveland-mcgill-a-vs-b-examples.jpg)

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Graphical Perception Results

![](figs/cleveland-mcgill-a-vs-b-examples.jpg)

![](figs/cleveland-mcgill-a-vs-b-results.jpg)

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Accuracy

* Position > Length and Angle > Area

* Prioritize high-rank channels (with reason)

* Do not expect precise judgments from low-rank channels

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Effectiveness Effect

![](figs/effectiveness.jpg)

## Discriminability

* How many distinct values can be distinguished within a channel

* It depends on:
  - Channel properties
  - Spatial arrangement
  - Size (resolution)
  - Cardinality

* Warning: Do not overestimate the number of values viewers can perceive/discriminate

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Discriminability

* Many channels, in particular identity channels, can only support a limited number of discriminable levels.
    - Line width is one of the most limited with perhaps 3 levels.
    - Using more than 5 or 6 color hues is not recommended.
    - Similarly, using more than 5 or 6 symbol shapes can create difficulties.
* If the number of levels that can be represented by a channel is smaller than the number of attribute levels then some form of meaningful aggregation is needed.

::: footer
Material from [link](https://homepage.divms.uiowa.edu/~luke/classes/STAT4580/percep.html#discriminability)
:::


## Popout

* Tasks performed in less than 200 to 250 milliseconds.

* Faster than eyes movement initiation.

* Suggest processing by parallel low-level visual system.

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Popout

![](figs/popout.jpg)

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Some features are not pre-attentive

![](figs/not-preattentive.jpg)

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Tasks requiring the use of multiple channels are (most of the time) not preattentive 

![](figs/not-preattentive2.jpg)

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Separability

* Amount of interference between channels

![](figs/color-and-shape.jpg)

::: footer
Slides based on material from Prof. Enrico Bertini
:::

## Relative vs Absolute

![](figs/absolute-vs-relative.jpg)

## Color

![](figs/animal-colors.jpg)

Vasas et al, PLOS Biology, 2024

::: footer
Image from [link](https://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.3002444)
:::

## Visible Spectrum

![](figs/visiblespectrum.jpg)

## Light

* Visible range: 390-700nm

* Luminance has a large dynamic range:

  – 0.00003 -- Moonless overcast night sky 

  – 30 -- Sky on overcast day

  – 3000 -- Sky on clear day

  – 16,000 -- Snowy ground in full sunlight

* Colors result from spectral curves 

  – dominant wavelength, hue

  – brightness, lightness

  – purity, saturation

## Physiology of the Eye

![](figs/physiology-eye.jpg)

## The Retina

![](figs/retina.jpg)

## Photoreceptors

* Discrete sensors that measure energy 
  – Adaptation
* Rods
  - active at low light levels (scotopic vision)
  - only one wavelength-sensitivity function
* Cones
  - active at normal light levels (photoptic)
  - three types: sensitivity functions with different peaks

## Cone Sensitivity

![](figs/cones-spectral-sensitity.jpg)

::: footer
Image from [link](https://wrfranklin.org/Teaching/graphics-f2019/files/stone_colors.pdf)
:::

## Density of Cones

![](figs/cones-density.jpg)

## Cones and Rods

![](figs/cones-and-rods-sensitivity.jpg)

## Color Stimulus

![](figs/color-stimulus.jpg)

## Color Matching Experiments

![](figs/color-matching-experiments.jpg)


## Color in Visualization

* Trichromacy: Humans perceive colors according to three channels

* Most usable and useful way to describe colors (especially for visualization):
  - Hue, Saturation, Luminance

::: footer
Material from Enrico Bertini
:::


## How do we use color in visualization?

* Quantify

* Label

::: footer
Material from Enrico Bertini
:::

## Quantify

![](figs/color-quantify.jpg)

::: footer
Material from Enrico Bertini
:::

## Label

![](figs/color-label.jpg)

::: footer
Material from Enrico Bertini
:::


## Quantitative Color Scales

* Desired Properties of Quantitative Color Scale:
  - Uniformity (value difference = perceived difference)
  - Discriminability (as many distinct values as possible)

::: footer
Material from Enrico Bertini
:::


## Quantitative Color Scales

* Desired Properties of Quantitative Color Scale:
  - Uniformity (value difference = perceived difference)
  - Discriminability (as many distinct values as possible)

::: footer
Material from Enrico Bertini
:::

## Single Hue Sequential Scales

* Choose one hue
* Map value to luminance

![](figs/single-hue-color-scale.jpg)

::: footer
Material from Enrico Bertini
:::

## Categorical Color Scales

* Properties:
  - Uniformity (uniform saliency / nothing stands out)
  - Discriminability (as many distinct values as possible)

  ![](figs/categorical-color-scale.jpg)

::: footer
Material from Enrico Bertini
:::


## Categorical Color Scales

* How many distinct values can one perceive?

* how many can you use in a visualization?

* Estimates are between 5-10 distinct codes.

* Healey, Christopher G. "Choosing effective colours for data visualization." Proceedings of IEEE Visualization'96, 1996.

::: footer
Material from Enrico Bertini
:::

## Diverging Color Scales

* Sometime useful/necessary to distinguish values above and below a threshold.


::: columns
::: {.column width="50%"}
![](figs/election-results-continous-colormap.jpg)
:::

::: {.column width="50%"}
![](figs/election-results-divergent-colormap.jpg)
:::

:::

Created using these data: [link](https://github.com/tonmcg/County_Level_Election_Results_12-16)

::: footer
Material from Enrico Bertini
:::

## Color Blindness

* Missing or defective photoreceptors:
   - 10% male and 1% female have some color deficiencies


![](figs/color-blindness.jpg)


Oliveira, Manuel. "Towards More Accessible Visualizations for Color-Vision-Deficient Individuals." Comput. Sci. Eng., 2013.

::: footer
Material from Enrico Bertini
:::

### Gestalt Principles

{{< video td-what-are-gestalt-principles-1080p.mp4 >}}

Video from https://www.interaction-design.org/literature/topics/gestalt-principles

### Color

## Further Reading 

## Lab - Introduction to Observable, HTML/CSS/JS, and D3

This section is adapted from the following notebooks:

* [Data Types, Graphical Marks, and Visual Encoding Channels](https://observablehq.com/@uwdata/data-types-graphical-marks-and-visual-encoding-channels) by Jeffrey Heer



## Lab Exercises

### How to approach writing your code

Let's say you have a sketch of a visualization that you want to make. How can you approach implementing it with D3? Here is a general approach that you can take:

* Think carefully about your graphical encoding.
    * What are your marks?
    * What data objects do those marks represent?
    * What are your channels?
    * How are you mapping from your data to your channels?
* Do your data transformation
    * Take a look at the dataset that you have. Figure out how you need to transform your data in order to get it into a format that your visualization needs.
* For the visualization, start with the basics:
    * Create your SVG element.
    * Set up your margins.
* Next, figure out your scales.
    * Your mapping from data attributes to channels will tell you what scales you need.
    * Your scales will inform what axes and legends you need.
* Determine if you need additional data transformation to draw more "complex" marks.
    * For lines, areas, stacked areas/bars, pie charts, etc. consult the [d3-shape](https://github.com/d3/d3-shape#areas) API documentation and examples.
* Now you're ready to draw the marks.
    * If you have groups of marks, first create and position your groups, then add marks to the groups.
    * Use joins to create one mark (or group) for each object in your data.
    * Use your scales to set the visual attributes of the marks or groups.