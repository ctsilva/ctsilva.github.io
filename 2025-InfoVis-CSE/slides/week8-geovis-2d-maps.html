<!DOCTYPE html>
<html lang="en"><head>
<script src="week8-geovis-2d-maps_files/libs/clipboard/clipboard.min.js"></script>
<script src="week8-geovis-2d-maps_files/libs/quarto-html/tabby.min.js"></script>
<script src="week8-geovis-2d-maps_files/libs/quarto-html/popper.min.js"></script>
<script src="week8-geovis-2d-maps_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="week8-geovis-2d-maps_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week8-geovis-2d-maps_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="week8-geovis-2d-maps_files/libs/quarto-html/quarto-syntax-highlighting-065a5179aebd64318d7ea99d77b64a9e.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="author" content="Claudio Silva">
  <meta name="dcterms.date" content="2025-10-24">
  <title>Foundations of Geovisualization</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="week8-geovis-2d-maps_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="week8-geovis-2d-maps_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href="week8-geovis-2d-maps_files/libs/revealjs/dist/theme/quarto-f826457789a1a24e3ceb715ff8c1f67b.css">
  <link href="week8-geovis-2d-maps_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="week8-geovis-2d-maps_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="week8-geovis-2d-maps_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="week8-geovis-2d-maps_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Foundations of Geovisualization</h1>
  <p class="subtitle">The 2D Map - CS-GY 6313 - Fall 2025</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Claudio Silva 
</div>
</div>
</div>

  <p class="date">2025-10-24</p>
</section>
<section>
<section id="foundations-of-geovisualization" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Foundations of Geovisualization</h1>

</section>
<section id="the-2d-map" class="slide level2">
<h2>The 2D Map</h2>
<aside class="notes">
<p>Welcome. Today we’re starting a three-part series on geovisualization. Before we can get to the complex 3D and interactive systems, we <em>must</em> understand the fundamentals. We’ll be focusing on the most common and, as we’ll see, the most <em>misused</em> form of visualization: the 2D static map. Our goal today is to learn how to read and create these maps <em>critically</em>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-1-the-power-of-spatial-analysis" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 1: The Power of Spatial Analysis</h1>

</section>
<section id="john-snows-1854-cholera-map" class="slide level2">
<h2>John Snow’s 1854 Cholera Map</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>What is a map for?</strong></p>
<ul>
<li>Analysis</li>
<li>Communication</li>
</ul>
<p><strong>Snow’s Innovation:</strong></p>
<ul>
<li>He didn’t just plot data</li>
<li>He used spatial relationships to solve a problem</li>
<li>Deaths clustered around the Broad Street pump</li>
<li>Had the handle removed → outbreak stopped</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/snow-cholera-detailed.png" style="width:100.0%"></p>
<figcaption>John Snow’s Cholera Map showing death locations and water pumps</figcaption>
</figure>
</div>
</div></div>
<aside class="notes">
<p>This is the foundational story of geovisualization. In 1854, cholera was a mystery. John Snow plotted the deaths (the black bars) on a map of London. He saw they clustered around one water pump—the Broad Street pump. He had the handle removed, and the outbreak stopped. This is the “why” of what we do. He didn’t just make a picture; he used the spatial relationship between deaths and pumps to form a hypothesis and take action.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="historical-milestones-in-cartography" class="slide level2">
<h2>Historical Milestones in Cartography</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="ptolemys-geographica-c.-150-ad">Ptolemy’s Geographica (c.&nbsp;150 AD)</h3>
<ul>
<li>Foundation of modern cartography</li>
<li>Latitude and longitude coordinate system</li>
<li>Over 2000 years of influence</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/ptolemy-map.png"></p>
<figcaption>Ptolemy’s World Map</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<h3 id="minards-flow-map-1869">Minard’s Flow Map (1869)</h3>
<ul>
<li>Multiple variables in one visualization:
<ul>
<li>Troop size (width)</li>
<li>Temperature (bottom scale)</li>
<li>Location (geography)</li>
<li>Direction (color: tan = advance, black = retreat)</li>
</ul></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/minard-napoleon-detailed.png"></p>
<figcaption>Minard’s Map of Napoleon’s Russian Campaign</figcaption>
</figure>
</div>
</div></div>
<aside class="notes">
<p>Maps are not new. Ptolemy laid the groundwork for using latitude and longitude over 2000 years ago. On the right is one of the most famous visualizations ever, by Charles Joseph Minard. It shows the devastating losses of Napoleon’s army in Russia. The thick tan band shows the army size shrinking on the way to Moscow, and the thin black line shows its utter collapse on the retreat, plotted against temperature. This is a brilliant <em>flow map</em>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-2-when-to-use-a-map" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 2: When to Use a Map?</h1>

</section>
<section id="the-critical-question" class="slide level2">
<h2>The Critical Question</h2>
<div class="r-fit-text">
<p><strong>“Not all geographical data should be on a map.”</strong></p>
</div>
<div class="fragment">
<h3 id="when-is-the-bar-chart-better">When is the bar chart better?</h3>
<ul>
<li>For <strong>ranking</strong> and <strong>lookup</strong> tasks</li>
<li>“Which state has the highest sales?”</li>
<li>“What are the top 5 states?”</li>
</ul>
</div>
<div class="fragment">
<h3 id="when-is-the-map-better">When is the map better?</h3>
<ul>
<li>For finding <strong>spatial patterns</strong></li>
<li>For identifying <strong>clusters</strong></li>
<li>For understanding <strong>geographic relationships</strong></li>
<li>“Are sales clustered in the Midwest?”</li>
</ul>
</div>
<aside class="notes">
<p>This is the <em>most important</em> question you must ask every time. Just because you have spatial data (like states) doesn’t mean you <em>must</em> use a map.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="map-vs.-bar-chart-the-same-data" class="slide level2">
<h2>Map vs.&nbsp;Bar Chart: The Same Data</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/sales-map.png"></p>
<figcaption>Map of US states colored by sales value</figcaption>
</figure>
</div>
<p><strong>Better for:</strong> Spatial patterns, regional clustering</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/sales-barchart.png"></p>
<figcaption>Bar chart of sales by state, sorted</figcaption>
</figure>
</div>
<p><strong>Better for:</strong> Ranking, exact value lookup</p>
</div></div>
<aside class="notes">
<p>Look at these two charts. If my question is, “Which state has the highest sales?” or “What are the top 5 states?” the bar chart is <em>infinitely</em> better. If my question is, “Are sales clustered? Is there a pattern in the Midwest?” the map is the only way to see that.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-3-the-fundamental-problem" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 3: The Fundamental Problem</h1>

</section>
<section id="projections-mapping-3d-to-2d" class="slide level2">
<h2>Projections: Mapping 3D to 2D</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>The Challenge:</strong></p>
<ul>
<li>Earth is a 3D sphere</li>
<li>Screens and paper are 2D planes</li>
<li>You <strong>cannot</strong> flatten a sphere without distortion</li>
</ul>
<div class="fragment">
<p><strong>You must choose what to distort:</strong></p>
<ul>
<li>Shape</li>
<li>Area</li>
<li>Distance</li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/projection-concept.png"></p>
<figcaption>Diagram showing sphere unpeeling onto flat surface</figcaption>
</figure>
</div>
</div></div>
<div class="r-fit-text fragment">
<p><strong>Any 2D map is a lie. The question is: what kind of lie?</strong></p>
</div>
<aside class="notes">
<p>This is the fundamental challenge of all cartography. The Earth is a sphere (well, an oblate spheroid). A screen or piece of paper is flat. Any 2D map <em>is a lie</em>. It’s a distorted view of reality. The question is, what <em>kind</em> of “lie” (distortion) are you choosing, and is it appropriate for your task?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="projection-types-what-they-preserve" class="slide level2">
<h2>Projection Types: What They Preserve</h2>
<div class="columns">
<div class="column" style="width:33%;">
<h3 id="conformal">Conformal</h3>
<p><em>Preserves shape &amp; angles</em></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/mercator-projection.png"></p>
<figcaption>Mercator projection</figcaption>
</figure>
</div>
<p><strong>Use:</strong> Navigation (constant compass bearing)</p>
</div><div class="column" style="width:33%;">
<h3 id="equal-area">Equal-Area</h3>
<p><em>Preserves relative area</em></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/albers-projection.png"></p>
<figcaption>Albers Equal-Area projection</figcaption>
</figure>
</div>
<p><strong>Use:</strong> Thematic maps (choropleths)</p>
</div><div class="column" style="width:33%;">
<h3 id="equidistant">Equidistant</h3>
<p><em>Preserves distance from center</em></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/azimuthal-projection.png"></p>
<figcaption>Azimuthal Equidistant projection</figcaption>
</figure>
</div>
<p><strong>Use:</strong> Distance calculations</p>
</div></div>
<aside class="notes">
<p>These are the three main categories of projections, each preserving different properties. Conformal projections preserve shape and angles, which is why Mercator was great for sailing. Equal-area projections preserve relative sizes, which is critical for thematic maps. Equidistant projections preserve distances from a center point.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="tissots-indicatrix-visualizing-distortion" class="slide level2">
<h2>Tissot’s Indicatrix: Visualizing Distortion</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="mercator-conformal">Mercator (Conformal)</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/tissot-mercator.png"></p>
<figcaption>Tissot circles on Mercator projection</figcaption>
</figure>
</div>
<ul>
<li>Circles remain circles (shape preserved)</li>
<li>But circles get <strong>huge</strong> near poles (area distorted)</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="equal-area-1">Equal-Area</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/tissot-equal-area.png"></p>
<figcaption>Tissot circles on equal-area projection</figcaption>
</figure>
</div>
<ul>
<li>Circles become ellipses (shape distorted)</li>
<li>But all have <strong>same area</strong> (area preserved)</li>
</ul>
</div></div>
<div class="footer">
<p>Interactive Tissot tool: <a href="https://mgimond.github.io/tissot/">mgimond.github.io/tissot</a></p>
</div>
<aside class="notes">
<p>These are the tradeoffs. The Mercator projection, on the left, preserves <em>shape</em>. This is why it was great for sailing—a straight line on the map is a constant compass bearing. But look at the area distortion. The projection on the right is <em>equal-area</em>. It preserves the <em>size</em> of regions, which is critical for the maps we’re about to discuss, but it has to distort the shapes.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="projection-hall-of-shamefame" class="slide level2">
<h2>Projection Hall of Shame/Fame</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="mercator-the-infamous-example">Mercator: The Infamous Example</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/mercator-greenland-africa.png"></p>
<figcaption>Mercator showing Greenland vs Africa</figcaption>
</figure>
</div>
<p><strong>The Problem:</strong> Greenland looks bigger than Africa</p>
<p><strong>Reality:</strong> Africa is <strong>14× larger</strong> than Greenland</p>
</div><div class="column" style="width:50%;">
<h3 id="albers-equal-area-the-fix">Albers Equal-Area: The Fix</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/albers.png"></p>
<figcaption>Albers projection showing true relative sizes</figcaption>
</figure>
</div>
<p><strong>The Solution:</strong> Use equal-area for thematic maps</p>
</div></div>
<div class="r-fit-text fragment">
<p><strong>Rule: If you shade areas, you MUST use an equal-area projection.</strong></p>
</div>
<aside class="notes">
<p>This is the classic, infamous example. On the Mercator projection, Greenland looks massive, larger than Africa. In reality, Africa is 14 times larger than Greenland. This is fine for sailing, but if you make a choropleth map of “GDP” on a Mercator projection, you are visually lying, giving far too much prominence to countries near the poles. <strong>If you are making a choropleth map, you must use an equal-area projection.</strong></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-true-size-of-countries" class="slide level2">
<h2>The True Size of Countries</h2>
<iframe width="1600" height="900" src="https://www.youtube.com/embed/kIID5FDi2JQ" title="The True Size Of ..." frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" style="display: block; margin: 0 auto;">
</iframe>
<aside class="notes">
<p>This video demonstrates an interactive tool that lets you drag countries around on the Mercator projection and watch them change size as they move to different latitudes. It’s a powerful demonstration of how dramatically the Mercator projection distorts area. Watch how Greenland shrinks when you drag it to the equator, or how Africa expands when moved northward. This is why choosing the right projection for your data visualization task is so critical.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="understanding-mercator-distortion" class="slide level2">
<h2>Understanding Mercator Distortion</h2>

<img data-src="figs/week8/mercador.png" style="width:90.0%" class="r-stretch quarto-figure-center"><p class="caption">How Mercator exaggerates territories far from the equator</p><div class="footer">
<p>Source: <a href="https://www.reuters.com/graphics/AFRICA-MAP/lgpdaqrdyvo/">Reuters Graphics - The True Size of Africa</a></p>
</div>
<aside class="notes">
<p>This beautiful diagram from Reuters shows exactly how the Mercator projection works and why it distorts size. On the left, you see the globe with Africa and Greenland in their true relative sizes. In the middle, the cylindrical projection process is shown—the globe is “unrolled” onto a cylinder. On the right, you see the flat map result. Notice how Greenland, being far from the equator, gets stretched enormously, while Africa, which straddles the equator, maintains a size closer to reality. This is not a flaw for navigation—Mercator was designed for this purpose. But it becomes a serious problem when we use it for data visualization.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-4-taxonomy-of-thematic-maps" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 4: Taxonomy of Thematic Maps</h1>

</section>
<section id="type-1-choropleth-map" class="slide level2">
<h2>Type 1: Choropleth Map</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/nyt-choropleth-winner.png"></p>
<figcaption>NYT 2020 Election: By Winner (choropleth)</figcaption>
</figure>
</div>
</div><div class="column" style="width:40%;">
<p><strong>Definition:</strong></p>
<p>Regions are shaded based on a value</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Categorical data (winner/loser)</li>
<li>Rates and percentages</li>
<li>Density measures</li>
</ul>
<p><strong>Good for:</strong> Seeing broad regional patterns</p>
</div></div>
<aside class="notes">
<p>This is a <strong>choropleth</strong>. Each county is shaded by <em>who won</em>. This is good for seeing broad regional patterns. The NYT is a master of this type of visualization. Note that this is a <em>categorical</em> choropleth—it shows categories (red vs blue, winner vs loser). The pitfalls we’re about to discuss in Part 5 apply primarily to <em>quantitative</em> choropleths, where you’re shading by a numerical value or rate. Those are far more common and much easier to get wrong.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="type-2-proportional-symbol-map" class="slide level2">
<h2>Type 2: Proportional Symbol Map</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/nyt-proportional-lead.png"></p>
<figcaption>NYT 2020 Election: Size of Lead (proportional symbols)</figcaption>
</figure>
</div>
</div><div class="column" style="width:40%;">
<p><strong>Definition:</strong></p>
<p>Symbols (e.g., circles) are scaled based on a value</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Absolute quantities</li>
<li>Magnitude comparisons</li>
<li>Population distributions</li>
</ul>
<p><strong>Good for:</strong> Showing <em>where</em> the values are, not just the land area</p>
</div></div>
<aside class="notes">
<p>This is a <strong>proportional symbol map</strong>. Each circle is scaled by the <em>size of the lead</em>. This is a very different story—it shows <em>where</em> the votes are, not just <em>land area</em>. Pay close attention to this technique. We’ll see it again later as a powerful solution to one of the major pitfalls of choropleth maps.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="type-3-cartogram" class="slide level2">
<h2>Type 3: Cartogram</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/nyt-cartogram-electoral.png"></p>
<figcaption>NYT Electoral College Cartogram (one square = one electoral vote)</figcaption>
</figure>
</div>
</div><div class="column" style="width:40%;">
<p><strong>Definition:</strong></p>
<p>Geometry (area) is distorted to represent a quantity</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Population-based metrics</li>
<li>Electoral votes</li>
<li>Economic measures</li>
</ul>
<p><strong>Good for:</strong> De-emphasizing misleading land area</p>
</div></div>
<aside class="notes">
<p>This is a <strong>cartogram</strong>. This is a brilliant solution to the election map problem. It <em>abandons</em> true geography and instead sizes each state by its electoral votes. Like the proportional symbol map we just saw, this technique will reappear later when we discuss how to fix misleading choropleths.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="type-4-flow-map" class="slide level2">
<h2>Type 4: Flow Map</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/minard-coal-exports.png"></p>
<figcaption>Minard’s British Coal Exports (1864)</figcaption>
</figure>
</div>
</div><div class="column" style="width:40%;">
<p><strong>Definition:</strong></p>
<p>Shows movement or connections between regions</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Trade routes</li>
<li>Migration patterns</li>
<li>Transportation networks</li>
</ul>
<p><strong>Visual encoding:</strong> Line width ∝ quantity flowing</p>
</div></div>
<aside class="notes">
<p>This is a <strong>flow map</strong> by Minard again, showing coal exports. The width of the line is proportional to the amount of coal being exported along each route.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-5-four-critical-pitfalls" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 5: Four Critical Pitfalls</h1>
<aside class="notes">
<p>We’re going to spend the next few minutes on how <em>not</em> to lie with maps. Most of the “bad” maps you see are choropleths that fall into one of these four traps.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="choropleth-maps-handle-with-care" class="slide level2">
<h2>Choropleth Maps: Handle with Care</h2>
<div class="r-fit-text">
<p>Choropleth maps are the most <strong>common</strong> and most <strong>misused</strong> type of map.</p>
</div>
<h3 id="four-major-pitfalls">Four Major Pitfalls:</h3>
<ol type="1">
<li class="fragment"><strong>Normalization</strong> (Base Rate Bias)</li>
<li class="fragment"><strong>Classification</strong> (Binning)</li>
<li class="fragment"><strong>Color</strong></li>
<li class="fragment"><strong>Geography</strong> (MAUP)</li>
</ol>
<div class="fragment">
<div class="r-fit-text">
<p>⚠️ Avoid these traps to create honest visualizations ⚠️</p>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="pitfall-1-normalization" class="title-slide slide level1 center" data-background-color="#c23b22">
<h1>Pitfall 1: Normalization</h1>

</section>
<section id="the-base-rate-bias-problem" class="slide level2">
<h2>The Base Rate Bias Problem</h2>
<div class="r-fit-text">
<p><strong>NEVER USE RAW COUNTS ON A CHOROPLETH MAP</strong></p>
</div>
<div class="fragment">
<p>A map of “Total Crimes” is just a map of “Total People”</p>
</div>
<div class="fragment">
<h3 id="you-must-normalize-your-data">You MUST normalize your data:</h3>
<ul>
<li><strong>Per Capita</strong> (e.g., crimes per 1,000 people)</li>
<li><strong>Density</strong> (e.g., crimes per square mile)</li>
<li><strong>Rate</strong> (e.g., unemployment rate, percentage)</li>
</ul>
</div>
</section>
<section id="projection-distortion-an-example" class="slide level2">
<h2>Projection Distortion: An Example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="equirectangular-projection">Equirectangular Projection</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/tissot-equirectangular.png"></p>
<figcaption>Equal circles at regular intervals</figcaption>
</figure>
</div>
<p><strong>What we expect:</strong> Regular grid, equal-sized circles</p>
</div><div class="column" style="width:50%;">
<h3 id="after-projection">After Projection</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/tissot-circles-comparison.png"></p>
<figcaption>Same data, different sizes appear</figcaption>
</figure>
</div>
<p><strong>What we see:</strong> Circle sizes vary dramatically by latitude</p>
</div></div>
<div class="r-fit-text fragment">
<p><strong>The same principle applies to data: you must normalize to avoid misleading comparisons.</strong></p>
</div>
<aside class="notes">
<p>Here’s a perfect demonstration of why normalization matters. These maps show the exact same data—equal-sized circles at regular intervals. But on different projections, they appear vastly different in size. The circles near the poles look enormous compared to those at the equator. This is exactly what happens when you plot raw counts on a map: you’re showing population density, not the phenomenon you actually care about. Just as these circles need to be “normalized” for the projection, your data needs to be normalized (per capita, density, rate) to show meaningful patterns.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="pitfall-2-classification-binning" class="title-slide slide level1 center" data-background-color="#c23b22">
<h1>Pitfall 2: Classification (Binning)</h1>

</section>
<section id="how-you-bin-changes-the-story" class="slide level2">
<h2>How You Bin Changes the Story</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><strong>Same data, different binning methods:</strong></p>
<h3 id="equal-interval">Equal Interval</h3>
<p>Divides range into equal steps</p>
<ul>
<li>Prone to outliers</li>
<li>Can leave bins empty</li>
</ul>
<h3 id="quantile">Quantile</h3>
<p>Same number of items per bin</p>
<ul>
<li>Good for ranking</li>
<li>Can be misleading if data is clustered</li>
</ul>
<h3 id="natural-breaks-jenks">Natural Breaks (Jenks)</h3>
<p>Finds “natural” clusters</p>
<ul>
<li>Minimizes within-class variance</li>
<li>More complex to compute</li>
</ul>
</div><div class="column" style="width:60%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/binning-comparison.png"></p>
<figcaption>Three maps showing same data with different classification methods</figcaption>
</figure>
</div>
</div></div>
<aside class="notes">
<p>Look at these three maps. They show the <em>exact same data</em>. The only difference is how we defined the cut-off points for the colors. Equal Interval is skewed by outliers like California. Quantile forces an equal number of states into each color. Natural Breaks uses an algorithm to find “natural” gaps in the data. There is no single “right” answer, but you <em>must</em> be aware of your choice and be able to defend it.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="classification-methods-compared" class="slide level2">
<h2>Classification Methods Compared</h2>
<table class="caption-top">
<colgroup>
<col style="width: 29%">
<col style="width: 37%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Best For</th>
<th>Pitfall</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Equal Interval</strong></td>
<td>Evenly distributed data</td>
<td>Dominated by outliers</td>
</tr>
<tr class="even">
<td><strong>Quantile</strong></td>
<td>Ranking &amp; comparison</td>
<td>Hides natural clustering</td>
</tr>
<tr class="odd">
<td><strong>Natural Breaks</strong></td>
<td>Data with natural groups</td>
<td>Can be arbitrary with uniform data</td>
</tr>
<tr class="even">
<td><strong>Manual</strong></td>
<td>Expert knowledge</td>
<td>Subjective, hard to defend</td>
</tr>
</tbody>
</table>
<div class="fragment">
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Takeaway</strong></p>
</div>
<div class="callout-content">
<p>There is no single “right” method, but you must be <strong>aware</strong> of your choice and able to <strong>defend</strong> it.</p>
</div>
</div>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="pitfall-3-color" class="title-slide slide level1 center" data-background-color="#c23b22">
<h1>Pitfall 3: Color</h1>

</section>
<section id="stop-using-rainbow-color-scales" class="slide level2">
<h2>Stop Using Rainbow Color Scales</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="bad-rainbow">❌ BAD: Rainbow</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/rainbow-colorscale-bad.png"></p>
<figcaption>Map with rainbow color scale</figcaption>
</figure>
</div>
<p><strong>Problems:</strong></p>
<ul>
<li>Not perceptually uniform</li>
<li>No intuitive order (is yellow &gt; green?)</li>
<li>Creates false boundaries</li>
<li>Misleading visual jumps</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="good-perceptual-scales">✓ GOOD: Perceptual Scales</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/good-sequential-scale.png"></p>
<figcaption>Map with proper sequential scale</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/good-diverging-scale.png"></p>
<figcaption>Map with diverging scale</figcaption>
</figure>
</div>
</div></div>
<aside class="notes">
<p>Rainbows are bad for data. Why? They aren’t perceptually ordered. Is yellow “more” or “less” than green? The jump from yellow to green <em>looks</em> more dramatic than the jump from blue to purple, even if the data change is the same.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="choose-the-right-color-scale" class="slide level2">
<h2>Choose the Right Color Scale</h2>
<h3 id="sequential-light-dark">Sequential (Light → Dark)</h3>
<p>For data from <strong>low to high</strong> with no meaningful middle:</p>
<ul>
<li>Population density</li>
<li>Income levels</li>
<li>Temperature (0-100°F)</li>
</ul>
<p><strong>Examples:</strong> Viridis, Blues, YlOrRd</p>
<h3 id="diverging-color-a-neutral-color-b">Diverging (Color A → Neutral → Color B)</h3>
<p>For data with a <strong>meaningful midpoint</strong>:</p>
<ul>
<li>Above/below average</li>
<li>Gain/loss</li>
<li>Pro/con</li>
</ul>
<p><strong>Examples:</strong> RdBu (Red-White-Blue), BrBG, PiYG</p>
<div class="fragment">
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Use ColorBrewer</strong></p>
</div>
<div class="callout-content">
<p><a href="https://colorbrewer2.org">colorbrewer2.org</a> provides perceptually-uniform, colorblind-safe palettes</p>
</div>
</div>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="pitfall-4-geography-maup" class="title-slide slide level1 center" data-background-color="#c23b22">
<h1>Pitfall 4: Geography (MAUP)</h1>

</section>
<section id="the-modifiable-areal-unit-problem" class="slide level2">
<h2>The Modifiable Areal Unit Problem</h2>
<div class="r-fit-text">
<p><strong>Large, sparse regions visually dominate small, dense regions</strong></p>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/election-2016-red.png"></p>
<figcaption>2016 Election map looking “all red”</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<p><strong>The Problem:</strong></p>
<ul>
<li>Your eyes are drawn to <strong>area</strong>, not <strong>value</strong></li>
<li>Rural counties: few people, huge land area</li>
<li>Urban counties: millions of people, tiny area</li>
<li>This map shows <strong>land area</strong> colored by votes, not <strong>votes</strong></li>
</ul>
</div></div>
<aside class="notes">
<p>This is the fundamental <em>problem with geography itself</em>. Our eyes are drawn to <em>area</em>, not <em>value</em>. This map of the 2016 election is famously misleading. It looks “all red.” Why? Because Republican-leaning counties, while sparsely populated, take up a <em>ton</em> of land area. The tiny, dense, blue urban counties are almost invisible but contain millions more people. This map isn’t a map of <em>votes</em>; it’s a map of <em>land area</em> colored by votes.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="solutions-to-the-geography-problem" class="slide level2">
<h2>Solutions to the Geography Problem</h2>
<div class="columns">
<div class="column" style="width:33%;">
<h3 id="misleading">❌ Misleading</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/election-choropleth-bad.png"></p>
<figcaption>Standard choropleth</figcaption>
</figure>
</div>
<p>Land area dominates</p>
</div><div class="column" style="width:33%;">
<h3 id="solution-1-symbols">✓ Solution 1: Symbols</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/nyt-proportional-lead-solution.png"></p>
<figcaption>NYT Size of Lead symbol map</figcaption>
</figure>
</div>
<p>Shows where votes are</p>
</div><div class="column" style="width:33%;">
<h3 id="solution-2-cartogram">✓ Solution 2: Cartogram</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/nyt-cartogram-solution.png"></p>
<figcaption>NYT Electoral College cartogram</figcaption>
</figure>
</div>
<p>Distorts geography by value</p>
</div></div>
<aside class="notes">
<p>How do we <em>honestly</em> show the election data? The NYT has great solutions. The symbol map shows <em>where</em> the votes are and <em>how big</em> the leads are, ignoring the land area. The cartogram <em>distorts</em> the geography to make each state’s size proportional to its actual power (its electoral votes). Both of these are arguably more “truthful” representations of the election than the standard map.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-6-beyond-geographic-accuracy" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 6: Beyond Geographic Accuracy</h1>

</section>
<section id="sometimes-the-best-map-abandons-geography" class="slide level2">
<h2>Sometimes, the Best Map Abandons Geography</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="becks-london-tube-diagram-1933">Beck’s London Tube Diagram (1933)</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/beck-tube-map.png"></p>
<figcaption>Harry Beck’s London Underground map</figcaption>
</figure>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Geographically “wrong” but topologically “right”</strong></p>
<p><strong>What Beck realized:</strong></p>
<ul>
<li>For subway riders, exact geographic paths don’t matter</li>
<li>What matters: sequence of stops and where to transfer</li>
</ul>
<p><strong>His innovations:</strong></p>
<ul>
<li>Straightened lines</li>
<li>Regularized angles (45° or 90°)</li>
<li>Even spacing between stations</li>
<li>Prioritized <strong>topology</strong> over <strong>geography</strong></li>
</ul>
</div></div>
<aside class="notes">
<p>I want to end today by bridging to our next lecture. This is one of the most famous and successful visualizations ever made. And it’s almost completely <em>wrong</em>, geographically. Beck, an engineer, realized that for a subway rider, the <em>exact</em> geographic path doesn’t matter. What matters is the <em>sequence of stops</em> and <em>where to transfer</em>. He straightened the lines, regularized the angles, and spaced the stations evenly. He prioritized <em>topological</em> accuracy over <em>geographic</em> accuracy. This is a classic <em>urban</em> visualization, which is where we’ll pick up next time.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="bridge-to-next-lecture-urban-visualization" class="slide level2">
<h2>Bridge to Next Lecture: Urban Visualization</h2>
<ul>
<li class="fragment">Today: <strong>Geographic maps</strong> (accurate spatial representation)</li>
<li class="fragment">Next week: <strong>Urban visualizations</strong> (prioritize usability and patterns)</li>
<li class="fragment">Week 10: <strong>3D &amp; Interactive geo-spatial systems</strong> (combining both)</li>
</ul>
<div class="fragment">
<p>The tube map is our bridge: it shows that <strong>sometimes the most effective visualization deliberately distorts reality</strong> to better serve the user’s task.</p>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="summary-key-takeaways" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Summary &amp; Key Takeaways</h1>

</section>
<section id="five-critical-lessons" class="slide level2">
<h2>Five Critical Lessons</h2>
<ol type="1">
<li class="fragment"><strong>Use a map only when the spatial question matters</strong>
<ul>
<li class="fragment">Bar charts are better for ranking and lookup</li>
</ul></li>
<li class="fragment"><strong>Projections always distort—choose wisely</strong>
<ul>
<li class="fragment">Equal-area for choropleths (if you shade areas)</li>
</ul></li>
<li class="fragment"><strong>NEVER use raw counts on choropleths</strong>
<ul>
<li class="fragment">Always normalize: per capita, density, or rate</li>
</ul></li>
<li class="fragment"><strong>Choose classification and colors carefully</strong>
<ul>
<li class="fragment">Binning method changes the story</li>
<li class="fragment">Sequential vs.&nbsp;diverging scales</li>
</ul></li>
<li class="fragment"><strong>Geography itself can mislead (MAUP)</strong>
<ul>
<li class="fragment">Consider symbols, cartograms, or other encodings</li>
</ul></li>
</ol>
</section>
<section id="be-a-critical-consumer" class="slide level2">
<h2>Be a Critical Consumer</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>When you see a map, ask:</strong></p>
<ul>
<li>What’s the projection?</li>
<li>Is it normalized?</li>
<li>What’s the classification method?</li>
<li>What’s the color scale?</li>
<li>Is land area misleading the message?</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>When you make a map, remember:</strong></p>
<ul>
<li>Is a map the right choice?</li>
<li>Have I used equal-area projection?</li>
<li>Have I normalized my data?</li>
<li>Are my bins defensible?</li>
<li>Are my colors perceptually uniform?</li>
</ul>
</div></div>
<div class="fragment">
<div class="r-fit-text">
<p><strong>Next Time:</strong> Urban Visualization &amp; Network-Geographic Hybrids</p>
</div>
</div>
<aside class="notes">
<p>So, to recap: be skeptical. When you see a map, ask these questions. What’s the projection? Is it normalized? What’s the binning? What’s the color scale? Next time, we’ll take these fundamentals and apply them to the complex, dynamic world of urban data, where interactivity becomes essential. Questions?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="further-reading" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Further Reading</h1>

</section>
<section id="essential-resources" class="slide level2">
<h2>Essential Resources</h2>
<h3 id="choropleth-map-best-practices">Choropleth Map Best Practices</h3>
<ul>
<li><a href="https://www.datawrapper.de/blog/choroplethmaps"><strong>Datawrapper Guide to Choropleth Maps</strong></a>
<ul>
<li>Comprehensive guide to creating effective choropleth maps</li>
<li>Covers normalization, classification, and color choices</li>
<li>Practical examples and common pitfalls</li>
</ul></li>
</ul>
<h3 id="when-not-to-use-maps">When Not to Use Maps</h3>
<ul>
<li><a href="https://www.ericson.net/content/2011/10/when-maps-shouldnt-be-maps/"><strong>When Maps Shouldn’t Be Maps</strong></a> by Matthew Ericson (NYT)
<ul>
<li>Critical discussion of map vs.&nbsp;alternative visualizations</li>
<li>Real-world examples from data journalism</li>
<li>Decision framework for choosing visualization types</li>
</ul></li>
</ul>
<h3 id="interactive-tools">Interactive Tools</h3>
<ul>
<li><a href="https://mgimond.github.io/tissot/">Tissot’s Indicatrix Explorer</a> - Interactive projection distortion</li>
<li><a href="https://thetruesize.com/">The True Size Of…</a> - Drag countries to see size changes</li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="acknowledgments" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Acknowledgments</h1>

</section>
<section id="course-materials" class="slide level2">
<h2>Course Materials</h2>
<p>This lecture was developed using materials from:</p>
<ul>
<li><strong>Prof.&nbsp;Enrico Bertini</strong> (NYU Tandon)
<ul>
<li>Visualizing Geographical Data lecture slides</li>
<li>Information Visualization course materials</li>
</ul></li>
<li><strong>Prof.&nbsp;Jeff Heer</strong> (University of Washington)
<ul>
<li>CSE512: Data Visualization course</li>
<li>Maps and Cartography lecture materials</li>
</ul></li>
</ul>
<aside class="notes">
<p>Special thanks to Professors Bertini and Heer for their excellent foundational materials on geovisualization, which served as the basis for this lecture.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="supplemental-material" class="title-slide slide level1 center" data-background-color="#4a5568">
<h1>SUPPLEMENTAL MATERIAL</h1>

</section>
<section id="implementation-tooling" class="slide level2">
<h2>Implementation &amp; Tooling</h2>
<aside class="notes">
<p>The following slides provide supplemental material on data formats, classification methods, and practical coding examples. These bridge the theoretical concepts we’ve covered with real-world implementation.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-7-when-to-use-a-map" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 7: When to Use a Map?</h1>

</section>
<section id="the-fundamental-question" class="slide level2">
<h2>The Fundamental Question</h2>
<div class="r-fit-text">
<p><strong>Not all geographical data needs a map.</strong></p>
</div>
<div class="fragment">
<h3 id="the-trade-off">The Trade-off</h3>
<p>Maps use the <code>x</code> and <code>y</code> spatial dimensions to encode <strong>geography</strong>.</p>
<p>This means <code>x</code> and <code>y</code> <strong>cannot</strong> be used to encode other data variables (unlike a bar chart or scatterplot).</p>
</div>
<div class="fragment">
<p><strong>So when is a map the right choice?</strong></p>
</div>
<aside class="notes">
<p>This is the most fundamental question in geovisualization. Just because your data has geographic attributes doesn’t mean you must use a map. Remember: maps lock up your two most powerful visual channels—position x and position y—for geography alone.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="when-to-use-a-map-decision-framework" class="slide level2">
<h2>When to Use a Map: Decision Framework</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="good-use-spatial-questions">✓ Good Use: Spatial Questions</h3>
<ul>
<li class="fragment">“How are these phenomena <strong>clustered</strong>?”</li>
<li class="fragment">“What is <strong>near</strong> this location?”</li>
<li class="fragment">“How does this value change <strong>continuously</strong> over a region?”</li>
<li class="fragment">“Where is the <strong>path</strong> from A to B?”</li>
<li class="fragment">“What are the <strong>boundaries</strong> between regions?”</li>
</ul>
<p><strong>Use a map when:</strong> The spatial relationship is the question.</p>
</div><div class="column" style="width:50%;">
<h3 id="bad-use-aggregate-comparisons">✗ Bad Use: Aggregate Comparisons</h3>
<ul>
<li class="fragment">“Which state has the <strong>highest</strong> value?”</li>
<li class="fragment">“What are the <strong>top 5</strong> regions?”</li>
<li class="fragment">“How do these <strong>rank</strong>?”</li>
</ul>
<p><strong>Use a bar chart when:</strong> You need precise comparisons or rankings.</p>
<p><strong>Why?</strong> Maps introduce <strong>area bias</strong>—Montana looks more “important” than Rhode Island simply due to land area.</p>
</div></div>
<aside class="notes">
<p>Ask yourself: Is the user trying to understand WHERE something happens, or HOW MUCH? If it’s purely “how much,” a sorted bar chart will almost always be clearer and more honest than a map.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-8-geographic-data-formats" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 8: Geographic Data Formats</h1>

</section>
<section id="geojson-the-web-standard" class="slide level2">
<h2>GeoJSON: The Web Standard</h2>
<p><strong>GeoJSON</strong> is the <em>lingua franca</em> of web mapping.</p>
<ul>
<li class="fragment">It’s a JSON format that describes geographic features</li>
<li class="fragment">Human-readable and machine-parsable</li>
<li class="fragment">Supported by nearly all modern mapping libraries</li>
</ul>
<div class="fragment">
<h3 id="key-components">Key Components</h3>
<ul>
<li><code>FeatureCollection</code>: A list of all features</li>
<li><code>Feature</code>: A single geographic “thing” (park, city, road)</li>
<li><code>geometry</code>: The shape (<code>Point</code>, <code>LineString</code>, <code>Polygon</code>)</li>
<li><code>properties</code>: Non-spatial data (name, population, ID)</li>
</ul>
</div>
<aside class="notes">
<p>GeoJSON has become the de facto standard for web mapping because it’s simple, readable, and works seamlessly with JavaScript. You’ll see it everywhere in modern geovisualization.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="geojson-structure-example" class="slide level2">
<h2>GeoJSON Structure: Example</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-code-line-numbers="|2|5|9-12|18-24|30-37"><pre class="sourceCode numberSource json number-lines code-with-copy"><code class="sourceCode json"><span id="cb1-1"><a href=""></a><span class="fu">{</span></span>
<span id="cb1-2"><a href=""></a>  <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"FeatureCollection"</span><span class="fu">,</span></span>
<span id="cb1-3"><a href=""></a>  <span class="dt">"features"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-4"><a href=""></a>    <span class="fu">{</span></span>
<span id="cb1-5"><a href=""></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Feature"</span><span class="fu">,</span></span>
<span id="cb1-6"><a href=""></a>      <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-7"><a href=""></a>        <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"NYU Bobst Library"</span><span class="fu">,</span></span>
<span id="cb1-8"><a href=""></a>        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Library"</span></span>
<span id="cb1-9"><a href=""></a>      <span class="fu">},</span></span>
<span id="cb1-10"><a href=""></a>      <span class="dt">"geometry"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-11"><a href=""></a>        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Point"</span><span class="fu">,</span></span>
<span id="cb1-12"><a href=""></a>        <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span><span class="fl">-73.997421</span><span class="ot">,</span> <span class="fl">40.729454</span><span class="ot">]</span></span>
<span id="cb1-13"><a href=""></a>      <span class="fu">}</span></span>
<span id="cb1-14"><a href=""></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-15"><a href=""></a>    <span class="fu">{</span></span>
<span id="cb1-16"><a href=""></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Feature"</span><span class="fu">,</span></span>
<span id="cb1-17"><a href=""></a>      <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"W 4th Street"</span><span class="fu">,</span> <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Street"</span> <span class="fu">},</span></span>
<span id="cb1-18"><a href=""></a>      <span class="dt">"geometry"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-19"><a href=""></a>        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"LineString"</span><span class="fu">,</span></span>
<span id="cb1-20"><a href=""></a>        <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-21"><a href=""></a>          <span class="ot">[</span><span class="fl">-74.000277</span><span class="ot">,</span> <span class="fl">40.731868</span><span class="ot">],</span></span>
<span id="cb1-22"><a href=""></a>          <span class="ot">[</span><span class="fl">-73.997873</span><span class="ot">,</span> <span class="fl">40.731557</span><span class="ot">]</span></span>
<span id="cb1-23"><a href=""></a>        <span class="ot">]</span></span>
<span id="cb1-24"><a href=""></a>      <span class="fu">}</span></span>
<span id="cb1-25"><a href=""></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb1-26"><a href=""></a>    <span class="fu">{</span></span>
<span id="cb1-27"><a href=""></a>      <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Feature"</span><span class="fu">,</span></span>
<span id="cb1-28"><a href=""></a>      <span class="dt">"properties"</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">"name"</span><span class="fu">:</span> <span class="st">"Washington Square Park"</span> <span class="fu">},</span></span>
<span id="cb1-29"><a href=""></a>      <span class="dt">"geometry"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-30"><a href=""></a>        <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"Polygon"</span><span class="fu">,</span></span>
<span id="cb1-31"><a href=""></a>        <span class="dt">"coordinates"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-32"><a href=""></a>          <span class="ot">[</span></span>
<span id="cb1-33"><a href=""></a>            <span class="ot">[</span><span class="fl">-73.999</span><span class="ot">,</span> <span class="fl">40.732</span><span class="ot">],</span> <span class="ot">[</span><span class="fl">-73.996</span><span class="ot">,</span> <span class="fl">40.732</span><span class="ot">],</span></span>
<span id="cb1-34"><a href=""></a>            <span class="ot">[</span><span class="fl">-73.996</span><span class="ot">,</span> <span class="fl">40.730</span><span class="ot">],</span> <span class="ot">[</span><span class="fl">-73.999</span><span class="ot">,</span> <span class="fl">40.730</span><span class="ot">],</span></span>
<span id="cb1-35"><a href=""></a>            <span class="ot">[</span><span class="fl">-73.999</span><span class="ot">,</span> <span class="fl">40.732</span><span class="ot">]</span></span>
<span id="cb1-36"><a href=""></a>          <span class="ot">]</span></span>
<span id="cb1-37"><a href=""></a>        <span class="ot">]</span></span>
<span id="cb1-38"><a href=""></a>      <span class="fu">}</span></span>
<span id="cb1-39"><a href=""></a>    <span class="fu">}</span></span>
<span id="cb1-40"><a href=""></a>  <span class="ot">]</span></span>
<span id="cb1-41"><a href=""></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<p>Notice the three geometry types here: Point for a location, LineString for a path or street, and Polygon for an area. Each feature has properties that store the actual data you want to visualize.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="topojson-optimized-geography" class="slide level2">
<h2>TopoJSON: Optimized Geography</h2>
<p><strong>TopoJSON</strong> is an optimized version of GeoJSON.</p>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="key-advantages">Key Advantages</h3>
<ul>
<li><strong>Compressed</strong>: Much smaller file sizes</li>
<li><strong>Topology-aware</strong>: Stores shared boundaries only once</li>
<li><strong>Better for web</strong>: Faster downloads and parsing</li>
</ul>
<h3 id="the-insight">The Insight</h3>
<p>Instead of storing the border between Colorado and Utah <strong>twice</strong>, TopoJSON stores the arc <strong>once</strong> and notes it’s shared by both states.</p>
</div><div class="column" style="width:50%;">
<h3 id="when-to-use">When to Use</h3>
<ul>
<li>Large geographic datasets (countries, states)</li>
<li>Web applications (file size matters)</li>
<li>When features share boundaries</li>
</ul>
<h3 id="tools">Tools</h3>
<ul>
<li><strong>MapShaper</strong>: Convert, simplify, and edit</li>
<li><strong>topojson-client</strong>: Convert back to GeoJSON</li>
</ul>
</div></div>
<aside class="notes">
<p>TopoJSON can reduce file sizes by 80% or more for datasets like US state boundaries. The trade-off is that you need to convert it back to GeoJSON before most libraries can use it, but this is trivial with tools like topojson-client.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-9-data-classification-methods" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 9: Data Classification Methods</h1>

</section>
<section id="the-binning-problem" class="slide level2">
<h2>The Binning Problem</h2>
<p>For <strong>choropleth maps</strong>, how you “bin” your data into color classes can <strong>completely change the story</strong>.</p>
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/week8/binning-comparison.png" style="width:80.0%"></p>
<figcaption>Three maps, same data, different classification methods</figcaption>
</figure>
</div>
</div>
<div class="fragment">
<div class="r-fit-text">
<p><strong>Same data. Different bins. Different conclusions.</strong></p>
</div>
</div>
<aside class="notes">
<p>This is one of the most critical decisions you’ll make when creating a choropleth map, yet it’s often done automatically by software with no thought. Let’s understand the three main methods.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="classification-methods-compared-1" class="slide level2">
<h2>Classification Methods Compared</h2>
<h3 id="equal-interval-1">Equal Interval</h3>
<p>Divides the <strong>range</strong> into equal-sized steps (e.g., 0-10, 10-20, 20-30).</p>
<ul>
<li>✓ Easy to understand and explain</li>
<li>✗ <strong>Problem:</strong> Outliers can skew all data into one or two bins</li>
</ul>
<h3 id="quantile-equal-count">Quantile (Equal Count)</h3>
<p>Puts the <strong>same number</strong> of data points in each bin.</p>
<ul>
<li>✓ Good for showing relative <strong>ranking</strong></li>
<li>✗ <strong>Problem:</strong> Can be misleading if values are naturally clustered</li>
</ul>
<h3 id="jenks-natural-breaks">Jenks Natural Breaks</h3>
<p>Finds “natural” clusters/gaps in the data using statistical optimization.</p>
<ul>
<li>✓ Often the most <strong>honest</strong> default</li>
<li>✗ <strong>Problem:</strong> Can be arbitrary if data is uniformly distributed</li>
</ul>
<aside class="notes">
<p>There is no single “right” method. Equal Interval is good for data with a meaningful zero and regular intervals (like temperature). Quantile is good for highly skewed data where you want to emphasize differences. Jenks tries to find natural groupings and is a good starting point for most cases.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="choosing-your-classification" class="slide level2">
<h2>Choosing Your Classification</h2>
<table class="caption-top">
<colgroup>
<col style="width: 24%">
<col style="width: 30%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Best For</th>
<th>Watch Out For</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Equal Interval</strong></td>
<td>Evenly distributed data; meaningful intervals</td>
<td>Outliers dominating the map</td>
</tr>
<tr class="even">
<td><strong>Quantile</strong></td>
<td>Ranking; highly skewed data</td>
<td>Hiding natural clustering; arbitrary bin edges</td>
</tr>
<tr class="odd">
<td><strong>Jenks Natural Breaks</strong></td>
<td>Data with natural groups/gaps</td>
<td>Uniform data; hard to explain to audience</td>
</tr>
<tr class="even">
<td><strong>Manual</strong></td>
<td>Expert knowledge; specific breakpoints</td>
<td>Subjectivity; cherry-picking</td>
</tr>
</tbody>
</table>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Takeaway</strong></p>
</div>
<div class="callout-content">
<p>Always <strong>justify</strong> your choice. Show the data distribution (histogram) and explain why your classification makes sense for your story.</p>
</div>
</div>
</div>
</section>
<section class="slide level2">

</section></section>
<section>
<section id="part-10-practical-implementation-with-leaflet.js" class="title-slide slide level1 center" data-background-color="#2c5f77">
<h1>Part 10: Practical Implementation with Leaflet.js</h1>

</section>
<section id="leaflet.js-simple-web-mapping" class="slide level2">
<h2>Leaflet.js: Simple Web Mapping</h2>
<p><strong>Leaflet</strong> is a lightweight, open-source JavaScript library for interactive maps.</p>
<ul>
<li class="fragment"><strong>Simple API</strong>: Easy to learn, powerful results</li>
<li class="fragment"><strong>Tile-based</strong>: Handles the “slippy map” (zoom, pan) automatically</li>
<li class="fragment"><strong>Extensible</strong>: Plugins for everything from clustering to heat maps</li>
<li class="fragment"><strong>Perfect for</strong>: Adding interactive maps to web applications</li>
</ul>
<div class="fragment">
<p><strong>Let’s build a simple example using our NYU GeoJSON data.</strong></p>
</div>
<aside class="notes">
<p>Leaflet is probably the most popular web mapping library for good reason—it’s simple, well-documented, and “just works.” We’re going to walk through a minimal example that you can adapt for your own projects.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="leaflet-html-setup" class="slide level2">
<h2>Leaflet: HTML Setup</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-code-line-numbers="|2-3|6-8|11-13"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb2-1"><a href=""></a><span class="co">&lt;!-- 1. Include Leaflet CSS &amp; JS from a CDN --&gt;</span></span>
<span id="cb2-2"><a href=""></a><span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span></span>
<span id="cb2-3"><a href=""></a><span class="ot">      href</span><span class="op">=</span><span class="st">"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"</span><span class="dt">/&gt;</span></span>
<span id="cb2-4"><a href=""></a><span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb2-5"><a href=""></a></span>
<span id="cb2-6"><a href=""></a><span class="co">&lt;!-- 2. Style the map container to fill the screen --&gt;</span></span>
<span id="cb2-7"><a href=""></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb2-8"><a href=""></a>    <span class="pp">#map</span> { <span class="kw">height</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">vh</span><span class="op">;</span> }</span>
<span id="cb2-9"><a href=""></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb2-10"><a href=""></a></span>
<span id="cb2-11"><a href=""></a><span class="co">&lt;!-- 3. Create the map div --&gt;</span></span>
<span id="cb2-12"><a href=""></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb2-13"><a href=""></a>    <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"map"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb2-14"><a href=""></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<p>That’s it for the HTML. Three simple steps: include the library, style your container, and create a div. The library will take care of the rest.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="leaflet-initialize-the-map" class="slide level2">
<h2>Leaflet: Initialize the Map</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" data-code-line-numbers="|2|5-8"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href=""></a><span class="co">// 1. Initialize the map and set view [lat, long], zoom</span></span>
<span id="cb3-2"><a href=""></a><span class="kw">const</span> map <span class="op">=</span> L<span class="op">.</span><span class="fu">map</span>(<span class="st">'map'</span>)<span class="op">.</span><span class="fu">setView</span>([<span class="fl">40.7308</span><span class="op">,</span> <span class="op">-</span><span class="fl">73.9973</span>]<span class="op">,</span> <span class="dv">14</span>)<span class="op">;</span></span>
<span id="cb3-3"><a href=""></a></span>
<span id="cb3-4"><a href=""></a><span class="co">// 2. Add a tile layer (the base map)</span></span>
<span id="cb3-5"><a href=""></a>L<span class="op">.</span><span class="fu">tileLayer</span>(<span class="st">'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span class="op">,</span> {</span>
<span id="cb3-6"><a href=""></a>    <span class="dt">attribution</span><span class="op">:</span> <span class="st">'&amp;copy; OpenStreetMap contributors'</span><span class="op">,</span></span>
<span id="cb3-7"><a href=""></a>    <span class="dt">maxZoom</span><span class="op">:</span> <span class="dv">19</span></span>
<span id="cb3-8"><a href=""></a>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<p>Line 2 creates the map object and centers it on NYU’s campus at zoom level 14. Lines 5-8 add the base map tiles from OpenStreetMap. These tiles are the actual street map imagery you see.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="leaflet-add-geojson-data" class="slide level2">
<h2>Leaflet: Add GeoJSON Data</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" data-code-line-numbers="|2|5-14|16-22"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href=""></a><span class="co">// 3. Define our GeoJSON data</span></span>
<span id="cb4-2"><a href=""></a><span class="kw">const</span> myGeoJSON <span class="op">=</span> { <span class="co">/* ... from example.geojson ... */</span> }<span class="op">;</span></span>
<span id="cb4-3"><a href=""></a></span>
<span id="cb4-4"><a href=""></a><span class="co">// 4. Add GeoJSON layer to the map</span></span>
<span id="cb4-5"><a href=""></a>L<span class="op">.</span><span class="fu">geoJSON</span>(myGeoJSON<span class="op">,</span> {</span>
<span id="cb4-6"><a href=""></a>    <span class="co">// For each feature, bind a popup with its name</span></span>
<span id="cb4-7"><a href=""></a>    <span class="dt">onEachFeature</span><span class="op">:</span> <span class="kw">function</span> (feature<span class="op">,</span> layer) {</span>
<span id="cb4-8"><a href=""></a>        <span class="cf">if</span> (feature<span class="op">.</span><span class="at">properties</span> <span class="op">&amp;&amp;</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name</span>) {</span>
<span id="cb4-9"><a href=""></a>            <span class="kw">let</span> popup <span class="op">=</span> <span class="st">'&lt;h4&gt;'</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name</span> <span class="op">+</span> <span class="st">'&lt;/h4&gt;'</span><span class="op">;</span></span>
<span id="cb4-10"><a href=""></a>            popup <span class="op">+=</span> <span class="st">'&lt;p&gt;'</span> <span class="op">+</span> feature<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">description</span> <span class="op">+</span> <span class="st">'&lt;/p&gt;'</span><span class="op">;</span></span>
<span id="cb4-11"><a href=""></a>            layer<span class="op">.</span><span class="fu">bindPopup</span>(popup)<span class="op">;</span></span>
<span id="cb4-12"><a href=""></a>        }</span>
<span id="cb4-13"><a href=""></a>    }</span>
<span id="cb4-14"><a href=""></a>})<span class="op">.</span><span class="fu">addTo</span>(map)<span class="op">;</span></span>
<span id="cb4-15"><a href=""></a></span>
<span id="cb4-16"><a href=""></a><span class="co">// Points, lines, and polygons are automatically styled</span></span>
<span id="cb4-17"><a href=""></a><span class="co">// Click any feature to see its popup</span></span>
<span id="cb4-18"><a href=""></a><span class="co">// Pan and zoom the map to explore</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<aside class="notes">
<p>The magic happens here. L.geoJSON takes our GeoJSON data and automatically renders it—points become markers, lines become paths, polygons become shapes. We’re using onEachFeature to bind a popup to each feature so users can click to see details.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="live-demo" class="slide level2">
<h2>Live Demo</h2>
<div class="r-fit-text">
<p><strong>Let’s see it in action!</strong></p>
</div>
<p>Open: <code>examples/leaflet_example.html</code></p>
<ul>
<li class="fragment">Base map tiles loading</li>
<li class="fragment">Pan and zoom controls</li>
<li class="fragment">GeoJSON features rendered:
<ul>
<li class="fragment"><strong>Point</strong>: NYU Bobst Library (red circle)</li>
<li class="fragment"><strong>LineString</strong>: W 4th Street (blue line)</li>
<li class="fragment"><strong>Polygon</strong>: Washington Square Park (green area)</li>
</ul></li>
<li class="fragment">Click any feature to see its popup</li>
</ul>
<aside class="notes">
<p>Instructor should open the HTML file in a browser now. Show: (1) the base tiles, (2) pan/zoom, (3) the three geometry types rendered, (4) click a feature to show popup. Emphasize how little code this took—maybe 30 lines total.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="figs/vida.jpg" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="week8-geovis-2d-maps_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,

        height: 1080,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>